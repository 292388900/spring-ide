<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<!--
/*******************************************************************************
 * Copyright (c) 2005, 2009 Spring IDE Developers
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 * 
 * Contributors:
 *     Spring IDE Developers - initial API and implementation
 *******************************************************************************/
 -->
<plugin>

	<extension-point id="namespaces" name="%extensionNamespaces.name"
		schema="schema/namespaces.exsd" />

	<extension-point id="postprocessors" name="%extensionPostProcessors.name"
		schema="schema/postprocessors.exsd" />

	<extension-point id="resolvers" name="%extensionResolvers.name"
		schema="schema/resolvers.exsd" />

	<extension-point id="metadataproviders" name="%extensionMetadataproviders.name"
		schema="schema/metadataproviders.exsd" />

	<extension-point id="beansconfiglocators" name="%extensionBeanconfiglocators.name"
		schema="schema/beansconfiglocators.exsd" />

	<extension point="org.eclipse.core.resources.markers"
			id="problemmarker"
			name="%beansProblemMarker">
		<super type="org.springframework.ide.eclipse.core.problemmarker" />
		<attribute name="ruleId"/>
		<attribute name="errorId"/>
		<persistent value="true" />
	</extension>

	<extension point="org.eclipse.ui.ide.markerSupport">
		<markerTypeCategory name="%markerCategory.name">
			<markerTypeReference id="org.springframework.ide.eclipse.beans.core.problemmarker"/>
		</markerTypeCategory>
	</extension>

	<extension point="org.eclipse.core.expressions.propertyTesters">
		<propertyTester
			class="org.springframework.ide.eclipse.beans.core.internal.model.BeansModelPropertyTester"
			id="org.springframework.ide.eclipse.beans.core.beansModelTester"
			namespace="org.springframework.ide.eclipse.beans.core.model"
			properties="isBeansConfig, isInfrstructureBean" 
			type="java.lang.Object" />
	</extension>
	
	<extension point="org.eclipse.ui.elementFactories">
		<factory id="org.springframework.ide.eclipse.beans.core.factoryId"
			class="org.springframework.ide.eclipse.beans.core.internal.model.BeansModelElementFactory" />      
	</extension>
 
	 <extension
	       point="org.springframework.ide.eclipse.core.validators">
	    <validator id="beansvalidator"
	          class="org.springframework.ide.eclipse.beans.core.internal.model.validation.BeansConfigValidator"
	          name="%beansValidator.name"
	          description="%beansValidator.description"
			  icon="icons/full/obj16/bean_obj.gif"
			  markerId="problemmarker"
			  enabledByDefault="true" 
			  order="20" />
	    <rules validatorId="org.springframework.ide.eclipse.beans.core.beansvalidator">
		    <rule id="beanAlias"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.BeanAliasRule"
		            name="%beansValidator.rule.beanAlias.name"
		            description="%beansValidator.rule.beanAlias.description" />
		    <rule id="beanDefinitionHolder"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.BeanDefinitionHolderRule"
		            name="%beansValidator.rule.beanDefinitionHolder.name"
		            description="%beansValidator.rule.beanDefinitionHolder.description" />
		    <rule id="beanDefinition"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.BeanDefinitionRule"
		            name="%beansValidator.rule.beanDefinition.name"
		            description="%beansValidator.rule.beanDefinition.description" />
		    <rule id="beanClass"
            		class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.BeanClassRule"
            		description="%beansValidator.rule.beanClass.description"
            		name="%beansValidator.rule.beanClass.name">
	         	<property
	               	description="Bean classes that should get ignored during validation (separate values with comma):"
	               	name="ignorableClasses"
	               	value="org.springframework.osgi.config.internal.OsgiServiceLifecycleListenerAdapter, org.springframework.osgi.service.importer.support.OsgiServiceProxyFactoryBean, org.springframework.osgi.service.importer.support.OsgiServiceCollectionProxyFactoryBean, org.springframework.osgi.service.exporter.support.OsgiServiceFactoryBean, org.springframework.osgi.config.OsgiServiceRegistrationListenerAdapter">
	            </property>
     	    </rule>
		    <rule id="toolAnnotation"
            		class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.NamespaceElementsRule"
            		description="%beansValidator.rule.toolAnnotation.description"
            		name="%beansValidator.rule.toolAnnotation.name"
            		enabledByDefault="false">
	         	<property
	               	description="Bean classes that should get ignored during validation (separate values with comma):"
	               	name="ignorableClasses"
	               	value="org.springframework.osgi.config.internal.OsgiServiceLifecycleListenerAdapter, org.springframework.osgi.service.importer.support.OsgiServiceProxyFactoryBean, org.springframework.osgi.service.importer.support.OsgiServiceCollectionProxyFactoryBean, org.springframework.osgi.service.exporter.support.OsgiServiceFactoryBean, org.springframework.osgi.config.OsgiServiceRegistrationListenerAdapter">
	            </property>
	         	<property
	               	description="Bean names that should get ignored during validation (separate values with comma):"
	               	name="ignorableBeans"
	               	value="bundleContext">
	            </property>
     	    </rule>
		    <rule id="beanInitDestroyMethod"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.BeanInitDestroyMethodRule"
		            name="%beansValidator.rule.beanInitDestroyMethod.name"
		            description="%beansValidator.rule.beanInitDestroyMethod.description" />
		    <rule id="beanFactory"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.BeanFactoryRule"
		            name="%beansValidator.rule.beanFactory.name"
		            description="%beansValidator.rule.beanFactory.description" />
		    <rule id="beanConstructorArgument"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.BeanConstructorArgumentRule"
		            name="%beansValidator.rule.beanConstructorArgument.name"
		            description="%beansValidator.rule.beanConstructorArgument.description" />
		    <rule id="beanProperty"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.BeanPropertyRule"
		            name="%beansValidator.rule.beanProperty.name"
		            description="%beansValidator.rule.beanProperty.description" />
		    <rule id="beanReference"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.BeanReferenceRule"
		            name="%beansValidator.rule.beanReference.name"
		            description="%beansValidator.rule.beanReference.description" >
   	         	<property
	               	description="Bean names that should get ignored during validation (separate values with comma):"
	               	name="ignorableBeans"
	               	value="bundleContext">
	            </property>
		    </rule>
		    <rule id="requiredProperty"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.RequiredPropertyRule"
		            name="%beansValidator.rule.requiredProperty.name"
		            description="%beansValidator.rule.requiredProperty.description"
		            enabledByDefault="false" />
		    <rule id="parsingProblems"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.SpringParsingProblemsRule"
		            name="%beansValidator.rule.parsingProblems.name"
		            description="%beansValidator.rule.parsingProblems.description" />
		    <rule id="methodOverride"
		            class="org.springframework.ide.eclipse.beans.core.internal.model.validation.rules.BeanMethodOverrideRule"
		            name="%beansValidator.rule.methodOverride.name"
		            description="%beansValidator.rule.methodOverride.description" />
	    </rules>
	</extension>
	
	<extension
	      point="org.springframework.ide.eclipse.core.builders">
	   <builder
	         class="org.springframework.ide.eclipse.beans.core.internal.model.metadata.BeanMetadataProjectBuilder"
	         description="%beanmetadataBuilder.description"
	         enabledByDefault="true"
    	     id="beanmetadatabuilder"
	         name="%beanmetadataBuilder.name"
	         icon="icons/full/obj16/annotation_obj.gif"
	         order="20">
	   </builder>
	</extension>
 
    <extension
         point="org.springframework.ide.eclipse.beans.core.metadataproviders">
        <metadataProvider
          	class="org.springframework.ide.eclipse.beans.core.internal.model.metadata.DelegatingAnnotationReadingMetadataProvider">
        </metadataProvider>
    </extension>
  
    <extension
          point="org.springframework.ide.eclipse.core.listeners">
       <listener
             class="org.springframework.ide.eclipse.beans.core.internal.model.validation.BeansConfigReloadingProjectContributionEventListener">
       </listener>
       <listener
             class="org.springframework.ide.eclipse.beans.core.internal.model.validation.BeansTypeHierachyProjectContributionEventListener">
       </listener>
    </extension>
	
</plugin>
